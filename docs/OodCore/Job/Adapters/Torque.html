<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OodCore::Job::Adapters::Torque
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OodCore::Job::Adapters::Torque";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../OodCore.html" title="OodCore (module)">OodCore</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Job.html" title="OodCore::Job (module)">Job</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Adapters.html" title="OodCore::Job::Adapters (module)">Adapters</a></span></span>
     &raquo; 
    <span class="title">Torque</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OodCore::Job::Adapters::Torque
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Adapter.html" title="OodCore::Job::Adapter (class)">OodCore::Job::Adapter</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Adapter.html" title="OodCore::Job::Adapter (class)">OodCore::Job::Adapter</a></span></li>
          
            <li class="next">OodCore::Job::Adapters::Torque</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ood_core/job/adapters/torque.rb<span class="defines">,<br />
  lib/ood_core/job/adapters/torque/batch.rb,<br /> lib/ood_core/job/adapters/torque/attributes.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Utility class to maintain all the Torque attributes available.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span>, <span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="STATE_MAP-constant" class="">STATE_MAP =
          <div class="docstring">
  <div class="discussion">
    
<p>Mapping of state characters for PBS</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:queued</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:queued_held</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>T</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:queued_held</span><span class='comma'>,</span>    <span class='comment'># transiting (being moved to new location)
</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:queued_held</span><span class='comma'>,</span>    <span class='comment'># waiting (waiting for its execution time)
</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>R</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:running</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>S</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:suspended</span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:running</span><span class='comma'>,</span>        <span class='comment'># exiting, but still running
</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='symbol'>:completed</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="ATTR-constant" class="">ATTR =
          <div class="docstring">
  <div class="discussion">
    
<p>Maintains a constant Hash of defined PBS attribute types Includes:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Attribute</span> <span class='id identifier rubyid_names'>names</span> <span class='id identifier rubyid_used'>used</span> <span class='id identifier rubyid_by'>by</span> <span class='id identifier rubyid_user'>user</span> <span class='id identifier rubyid_commands'>commands</span>
<span class='const'>Additional</span> <span class='id identifier rubyid_job'>job</span> <span class='kw'>and</span> <span class='id identifier rubyid_general'>general</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='id identifier rubyid_names'>names</span>
<span class='const'>Additional</span> <span class='id identifier rubyid_queue'>queue</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='id identifier rubyid_names'>names</span>
<span class='const'>Additional</span> <span class='id identifier rubyid_server'>server</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='id identifier rubyid_names'>names</span>
<span class='const'>Additional</span> <span class='id identifier rubyid_node'>node</span> <span class='id identifier rubyid_attribute'>attribute</span> <span class='id identifier rubyid_names'>names</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='comment'># Attribute names used by user commands
</span>  <span class='label'>a:</span>                 <span class='symbol'>:Execution_Time</span><span class='comma'>,</span>
  <span class='label'>c:</span>                 <span class='symbol'>:Checkpoint</span><span class='comma'>,</span>
  <span class='label'>e:</span>                 <span class='symbol'>:Error_Path</span><span class='comma'>,</span>
  <span class='label'>f:</span>                 <span class='symbol'>:fault_tolerant</span><span class='comma'>,</span>
  <span class='label'>g:</span>                 <span class='symbol'>:group_list</span><span class='comma'>,</span>
  <span class='label'>h:</span>                 <span class='symbol'>:Hold_Types</span><span class='comma'>,</span>
  <span class='label'>j:</span>                 <span class='symbol'>:Join_Path</span><span class='comma'>,</span>
  <span class='label'>k:</span>                 <span class='symbol'>:Keep_Files</span><span class='comma'>,</span>
  <span class='label'>l:</span>                 <span class='symbol'>:Resource_List</span><span class='comma'>,</span>
  <span class='label'>m:</span>                 <span class='symbol'>:Mail_Points</span><span class='comma'>,</span>
  <span class='label'>o:</span>                 <span class='symbol'>:Output_Path</span><span class='comma'>,</span>
  <span class='label'>p:</span>                 <span class='symbol'>:Priority</span><span class='comma'>,</span>
  <span class='label'>q:</span>                 <span class='symbol'>:destination</span><span class='comma'>,</span>
  <span class='label'>r:</span>                 <span class='symbol'>:Rerunable</span><span class='comma'>,</span>
  <span class='label'>t:</span>                 <span class='symbol'>:job_array_request</span><span class='comma'>,</span>
  <span class='label'>array_id:</span>          <span class='symbol'>:job_array_id</span><span class='comma'>,</span>
  <span class='label'>u:</span>                 <span class='symbol'>:User_List</span><span class='comma'>,</span>
  <span class='label'>v:</span>                 <span class='symbol'>:Variable_List</span><span class='comma'>,</span>
  <span class='label'>A:</span>                 <span class='symbol'>:Account_Name</span><span class='comma'>,</span>
  <span class='label'>args:</span>              <span class='symbol'>:job_arguments</span><span class='comma'>,</span>
  <span class='label'>reservation_id:</span>    <span class='symbol'>:reservation_id</span><span class='comma'>,</span>
  <span class='label'>login_node_id:</span>     <span class='symbol'>:login_node_id</span><span class='comma'>,</span>
  <span class='label'>login_prop:</span>        <span class='symbol'>:login_property</span><span class='comma'>,</span>
  <span class='label'>external_nodes:</span>    <span class='symbol'>:external_nodes</span><span class='comma'>,</span>
  <span class='label'>multi_req_alps:</span>    <span class='symbol'>:multi_req_alps</span><span class='comma'>,</span>
  <span class='label'>M:</span>                 <span class='symbol'>:Mail_Users</span><span class='comma'>,</span>
  <span class='label'>N:</span>                 <span class='symbol'>:Job_Name</span><span class='comma'>,</span>
  <span class='label'>S:</span>                 <span class='symbol'>:Shell_Path_List</span><span class='comma'>,</span>
  <span class='label'>depend:</span>            <span class='symbol'>:depend</span><span class='comma'>,</span>
  <span class='label'>inter:</span>             <span class='symbol'>:interactive</span><span class='comma'>,</span>
  <span class='label'>stagein:</span>           <span class='symbol'>:stagein</span><span class='comma'>,</span>
  <span class='label'>stageout:</span>          <span class='symbol'>:stageout</span><span class='comma'>,</span>
  <span class='label'>jobtype:</span>           <span class='symbol'>:jobtype</span><span class='comma'>,</span>
  <span class='label'>submit_host:</span>       <span class='symbol'>:submit_host</span><span class='comma'>,</span>
  <span class='label'>init_work_dir:</span>     <span class='symbol'>:init_work_dir</span><span class='comma'>,</span>

  <span class='comment'># Additional job and general attribute names
</span>  <span class='label'>ctime:</span>             <span class='symbol'>:ctime</span><span class='comma'>,</span>
  <span class='label'>exechost:</span>          <span class='symbol'>:exec_host</span><span class='comma'>,</span>
  <span class='label'>execport:</span>          <span class='symbol'>:exec_port</span><span class='comma'>,</span>
  <span class='label'>mtime:</span>             <span class='symbol'>:mtime</span><span class='comma'>,</span>
  <span class='label'>qtime:</span>             <span class='symbol'>:qtime</span><span class='comma'>,</span>
  <span class='label'>session:</span>           <span class='symbol'>:session_id</span><span class='comma'>,</span>
  <span class='label'>euser:</span>             <span class='symbol'>:euser</span><span class='comma'>,</span>
  <span class='label'>egroup:</span>            <span class='symbol'>:egroup</span><span class='comma'>,</span>
  <span class='label'>hashname:</span>          <span class='symbol'>:hashname</span><span class='comma'>,</span>
  <span class='label'>hopcount:</span>          <span class='symbol'>:hop_count</span><span class='comma'>,</span>
  <span class='label'>security:</span>          <span class='symbol'>:security</span><span class='comma'>,</span>
  <span class='label'>sched_hint:</span>        <span class='symbol'>:sched_hint</span><span class='comma'>,</span>
  <span class='label'>substate:</span>          <span class='symbol'>:substate</span><span class='comma'>,</span>
  <span class='label'>name:</span>              <span class='symbol'>:Job_Name</span><span class='comma'>,</span>
  <span class='label'>owner:</span>             <span class='symbol'>:Job_Owner</span><span class='comma'>,</span>
  <span class='label'>used:</span>              <span class='symbol'>:resources_used</span><span class='comma'>,</span>
  <span class='label'>state:</span>             <span class='symbol'>:job_state</span><span class='comma'>,</span>
  <span class='label'>queue:</span>             <span class='symbol'>:queue</span><span class='comma'>,</span>
  <span class='label'>server:</span>            <span class='symbol'>:server</span><span class='comma'>,</span>
  <span class='label'>maxrun:</span>            <span class='symbol'>:max_running</span><span class='comma'>,</span>
  <span class='label'>maxreport:</span>         <span class='symbol'>:max_report</span><span class='comma'>,</span>
  <span class='label'>total:</span>             <span class='symbol'>:total_jobs</span><span class='comma'>,</span>
  <span class='label'>comment:</span>           <span class='symbol'>:comment</span><span class='comma'>,</span>
  <span class='label'>cookie:</span>            <span class='symbol'>:cookie</span><span class='comma'>,</span>
  <span class='label'>qrank:</span>             <span class='symbol'>:queue_rank</span><span class='comma'>,</span>
  <span class='label'>altid:</span>             <span class='symbol'>:alt_id</span><span class='comma'>,</span>
  <span class='label'>etime:</span>             <span class='symbol'>:etime</span><span class='comma'>,</span>
  <span class='label'>exitstat:</span>          <span class='symbol'>:exit_status</span><span class='comma'>,</span>
  <span class='label'>forwardx11:</span>        <span class='symbol'>:forward_x11</span><span class='comma'>,</span>
  <span class='label'>submit_args:</span>       <span class='symbol'>:submit_args</span><span class='comma'>,</span>
  <span class='label'>tokens:</span>            <span class='symbol'>:tokens</span><span class='comma'>,</span>
  <span class='label'>netcounter:</span>        <span class='symbol'>:net_counter</span><span class='comma'>,</span>
  <span class='label'>umask:</span>             <span class='symbol'>:umask</span><span class='comma'>,</span>
  <span class='label'>start_time:</span>        <span class='symbol'>:start_time</span><span class='comma'>,</span>
  <span class='label'>start_count:</span>       <span class='symbol'>:start_count</span><span class='comma'>,</span>
  <span class='label'>checkpoint_dir:</span>    <span class='symbol'>:checkpoint_dir</span><span class='comma'>,</span>
  <span class='label'>checkpoint_name:</span>   <span class='symbol'>:checkpoint_name</span><span class='comma'>,</span>
  <span class='label'>checkpoint_time:</span>   <span class='symbol'>:checkpoint_time</span><span class='comma'>,</span>
  <span class='label'>checkpoint_restart_status:</span>  <span class='symbol'>:checkpoint_restart_status</span><span class='comma'>,</span>
  <span class='label'>restart_name:</span>      <span class='symbol'>:restart_name</span><span class='comma'>,</span>
  <span class='label'>comp_time:</span>         <span class='symbol'>:comp_time</span><span class='comma'>,</span>
  <span class='label'>reported:</span>          <span class='symbol'>:reported</span><span class='comma'>,</span>
  <span class='label'>intcmd:</span>            <span class='symbol'>:inter_cmd</span><span class='comma'>,</span>
  <span class='label'>job_radix:</span>         <span class='symbol'>:job_radix</span><span class='comma'>,</span>
  <span class='label'>sister_list:</span>       <span class='symbol'>:sister_list</span><span class='comma'>,</span>
  <span class='label'>total_runtime:</span>     <span class='symbol'>:total_runtime</span><span class='comma'>,</span>
  <span class='label'>P:</span>                 <span class='symbol'>:proxy_user</span><span class='comma'>,</span>
  <span class='label'>node_exclusive:</span>    <span class='symbol'>:node_exclusive</span><span class='comma'>,</span>
  <span class='label'>exec_gpus:</span>         <span class='symbol'>:exec_gpus</span><span class='comma'>,</span>
  <span class='label'>exec_mics:</span>         <span class='symbol'>:exec_mics</span><span class='comma'>,</span>
  <span class='label'>J:</span>                 <span class='symbol'>:job_id</span><span class='comma'>,</span>
  <span class='label'>pagg:</span>              <span class='symbol'>:pagg_id</span><span class='comma'>,</span>
  <span class='label'>system_start_time:</span> <span class='symbol'>:system_start_time</span><span class='comma'>,</span>
  <span class='label'>gpu_flags:</span>         <span class='symbol'>:gpu_flags</span><span class='comma'>,</span>

  <span class='comment'># Additional queue attribute names
</span>
  <span class='comment'># Additional server attribute names
</span>
  <span class='comment'># Additional node attribute names
</span><span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Delete the submitted job.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#directive_prefix-instance_method" title="#directive_prefix (instance method)">#<strong>directive_prefix</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hold-instance_method" title="#hold (instance method)">#<strong>hold</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Put the submitted job on hold.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-instance_method" title="#info (instance method)">#<strong>info</strong>(id)  &#x21d2; Info </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve job info from the resource manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info_all-instance_method" title="#info_all (instance method)">#<strong>info_all</strong>(attrs: nil)  &#x21d2; Array&lt;Info&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve info for all jobs from the resource manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info_where_owner-instance_method" title="#info_where_owner (instance method)">#<strong>info_where_owner</strong>(owner, attrs: nil)  &#x21d2; Array&lt;Info&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve info for all jobs for a given owner or owners from the resource manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(opts = {})  &#x21d2; Torque </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Torque.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release-instance_method" title="#release (instance method)">#<strong>release</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Release the job that is on hold.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>(id)  &#x21d2; Status </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve job status from resource manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#submit-instance_method" title="#submit (instance method)">#<strong>submit</strong>(script, after: [], afterok: [], afternotok: [], afterany: [])  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Submit a job with the attributes defined in the job template instance.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Adapter.html" title="OodCore::Job::Adapter (class)">OodCore::Job::Adapter</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Adapter.html#cluster_info-instance_method" title="OodCore::Job::Adapter#cluster_info (method)">#cluster_info</a></span>, <span class='object_link'><a href="../Adapter.html#info_all_each-instance_method" title="OodCore::Job::Adapter#info_all_each (method)">#info_all_each</a></span>, <span class='object_link'><a href="../Adapter.html#info_where_owner_each-instance_method" title="OodCore::Job::Adapter#info_where_owner_each (method)">#info_where_owner_each</a></span>, <span class='object_link'><a href="../Adapter.html#job_name_illegal_chars-instance_method" title="OodCore::Job::Adapter#job_name_illegal_chars (method)">#job_name_illegal_chars</a></span>, <span class='object_link'><a href="../Adapter.html#sanitize_job_name-instance_method" title="OodCore::Job::Adapter#sanitize_job_name (method)">#sanitize_job_name</a></span>, <span class='object_link'><a href="../Adapter.html#supports_job_arrays%3F-instance_method" title="OodCore::Job::Adapter#supports_job_arrays? (method)">#supports_job_arrays?</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(opts = {})  &#x21d2; <tt><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns a new instance of Torque.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>#to_h</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the options defining this adapter</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:pbs</span>
          <span class="type">(<tt><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Torque::Batch</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The PBS batch object</p>
</div>
          
        </li>
      
    </ul>
  


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Factory.html#build_torque-class_method" title="OodCore::Job::Factory.build_torque (method)">Factory.build_torque</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_o'>o</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span><span class='period'>.</span><span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span>

  <span class='ivar'>@pbs</span> <span class='op'>=</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:pbs</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No pbs object specified. Missing argument: pbs</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="delete-instance_method">
  
    #<strong>delete</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Delete the submitted job</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong deleting a job</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#delete-instance_method" title="OodCore::Job::Adapter#delete (method)">OodCore::Job::Adapter#delete</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293
294
295
296
297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_delete_job'>delete_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/UnkjobidError.html" title="OodCore::Job::Adapters::Torque::FFI::UnkjobidError (class)">UnkjobidError</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/BadstateError.html" title="OodCore::Job::Adapters::Torque::FFI::BadstateError (class)">BadstateError</a></span></span>
  <span class='comment'># assume successful job deletion if can&#39;t find job id
</span>  <span class='comment'># assume successful job deletion if job is exiting or completed
</span>  <span class='kw'>nil</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="directive_prefix-instance_method">
  
    #<strong>directive_prefix</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 301</span>

<span class='kw'>def</span> <span class='id identifier rubyid_directive_prefix'>directive_prefix</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#QSUB</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hold-instance_method">
  
    #<strong>hold</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Put the submitted job on hold</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong holding a job</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#hold-instance_method" title="OodCore::Job::Adapter#hold (method)">OodCore::Job::Adapter#hold</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 263</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hold'>hold</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_hold_job'>hold_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/UnkjobidError.html" title="OodCore::Job::Adapters::Torque::FFI::UnkjobidError (class)">UnkjobidError</a></span></span>
  <span class='comment'># assume successful job hold if can&#39;t find job id
</span>  <span class='kw'>nil</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="info-instance_method">
  
    #<strong>info</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve job info from the resource manager</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>information describing submitted job</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong getting job info</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#info-instance_method" title="OodCore::Job::Adapter#info (method)">OodCore::Job::Adapter#info</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_info'>info</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_get_job'>get_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='id identifier rubyid_parse_job_info'>parse_job_info</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parse_job_array'>parse_job_array</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/UnkjobidError.html" title="OodCore::Job::Adapters::Torque::FFI::UnkjobidError (class)">UnkjobidError</a></span></span>
  <span class='comment'># set completed status if can&#39;t find job id
</span>  <span class='const'><span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Info.html#initialize-instance_method" title="OodCore::Job::Info#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
    <span class='label'>status:</span> <span class='symbol'>:completed</span>
  <span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="info_all-instance_method">
  
    #<strong>info_all</strong>(attrs: nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve info for all jobs from the resource manager</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>information describing submitted jobs</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong getting job info</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#info_all-instance_method" title="OodCore::Job::Adapter#info_all (method)">OodCore::Job::Adapter#info_all</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_info_all'>info_all</span><span class='lparen'>(</span><span class='label'>attrs:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_get_jobs'>get_jobs</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_parse_job_info'>parse_job_info</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="info_where_owner-instance_method">
  
    #<strong>info_where_owner</strong>(owner, attrs: nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve info for all jobs for a given owner or owners from the resource manager</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>owner</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the owner(s) of the jobs</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Info.html" title="OodCore::Job::Info (class)">Info</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>information describing submitted jobs</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong getting job info</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_info_where_owner'>info_where_owner</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='label'>attrs:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_owner'>owner</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_select_jobs'>select_jobs</span><span class='lparen'>(</span>
    <span class='label'>attribs:</span> <span class='lbracket'>[</span>
      <span class='lbrace'>{</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User_List</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>value:</span> <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>op:</span> <span class='symbol'>:eq</span> <span class='rbrace'>}</span>
    <span class='rbracket'>]</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_parse_job_info'>parse_job_info</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release-instance_method">
  
    #<strong>release</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Release the job that is on hold</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong releasing a job</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#release-instance_method" title="OodCore::Job::Adapter#release (method)">OodCore::Job::Adapter#release</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279
280
281
282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release'>release</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_release_job'>release_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/UnkjobidError.html" title="OodCore::Job::Adapters::Torque::FFI::UnkjobidError (class)">UnkjobidError</a></span></span>
  <span class='comment'># assume successful job release if can&#39;t find job id
</span>  <span class='kw'>nil</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    #<strong>status</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="../Status.html" title="OodCore::Job::Status (class)">Status</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve job status from resource manager</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Status.html" title="OodCore::Job::Status (class)">Status</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>status of job</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong getting job status</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#status-instance_method" title="OodCore::Job::Adapter#status (method)">OodCore::Job::Adapter#status</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244
245
246
247
248
249
250
251
252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_get_job'>get_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>filters:</span> <span class='lbracket'>[</span><span class='symbol'>:job_state</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span>
    <span class='op'>|</span><span class='id identifier rubyid_job_status'>job_status</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="../../../OodCore.html" title="OodCore (module)">OodCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Job.html" title="OodCore::Job (module)">Job</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Status.html" title="OodCore::Job::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Status.html#initialize-instance_method" title="OodCore::Job::Status#initialize (method)">new</a></span></span><span class='lparen'>(</span>
      <span class='label'>state:</span> <span class='const'><span class='object_link'><a href="#STATE_MAP-constant" title="OodCore::Job::Adapters::Torque::STATE_MAP (constant)">STATE_MAP</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span>
        <span class='id identifier rubyid_job_status'>job_status</span><span class='lbracket'>[</span><span class='symbol'>:job_state</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:undetermined</span>
      <span class='rparen'>)</span>
    <span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI.html" title="OodCore::Job::Adapters::Torque::FFI (class)">FFI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/FFI/UnkjobidError.html" title="OodCore::Job::Adapters::Torque::FFI::UnkjobidError (class)">UnkjobidError</a></span></span>
  <span class='comment'># set completed status if can&#39;t find job id
</span>  <span class='const'><span class='object_link'><a href="../Status.html" title="OodCore::Job::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Status.html#initialize-instance_method" title="OodCore::Job::Status#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>state:</span> <span class='symbol'>:completed</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="submit-instance_method">
  
    #<strong>submit</strong>(script, after: [], afterok: [], afternotok: [], afterany: [])  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Submit a job with the attributes defined in the job template instance</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>script</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Script.html" title="OodCore::Job::Script (class)">Script</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>script object that describes the script and attributes for the submitted job</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>after</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>this job may be scheduled for execution at any point after dependent jobs have started execution</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>afterok</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>this job may be scheduled for execution only after dependent jobs have terminated with no errors</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>afternotok</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>this job may be scheduled for execution only after dependent jobs have terminated with errors</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>afterany</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>this job may be scheduled for execution after dependent jobs have terminated</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the job id returned after successfully submitting a job</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if something goes wrong submitting a job</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Adapter.html#submit-instance_method" title="OodCore::Job::Adapter#submit (method)">OodCore::Job::Adapter#submit</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/torque.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_submit'>submit</span><span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span><span class='comma'>,</span> <span class='label'>after:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>afterok:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>afternotok:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>afterany:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_after'>after</span>      <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_after'>after</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_afterok'>afterok</span>    <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_afterok'>afterok</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_afternotok'>afternotok</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_afternotok'>afternotok</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_afterany'>afterany</span>   <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_afterany'>afterany</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>

  <span class='comment'># Set dependencies
</span>  <span class='id identifier rubyid_depend'>depend</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_depend'>depend</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>after:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_after'>after</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>           <span class='kw'>unless</span> <span class='id identifier rubyid_after'>after</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_depend'>depend</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>afterok:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_afterok'>afterok</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>       <span class='kw'>unless</span> <span class='id identifier rubyid_afterok'>afterok</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_depend'>depend</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>afternotok:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_afternotok'>afternotok</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_afternotok'>afternotok</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_depend'>depend</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>afterany:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_afterany'>afterany</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>     <span class='kw'>unless</span> <span class='id identifier rubyid_afterany'>afterany</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='comment'># Set mailing options
</span>  <span class='id identifier rubyid_mail_points'>mail_points</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mail_points'>mail_points</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email_on_started'>email_on_started</span>
  <span class='id identifier rubyid_mail_points'>mail_points</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>e</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email_on_terminated'>email_on_terminated</span>

  <span class='comment'># FIXME: Remove the Hash option once all Interactive Apps are
</span>  <span class='comment'># converted to Array format
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='comment'># Set headers
</span>    <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>job_arguments:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Hold_Types:</span> <span class='symbol'>:u</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_submit_as_hold'>submit_as_hold</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Rerunable:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_rerunnable'>rerunnable</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>y</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_rerunnable'>rerunnable</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>init_work_dir:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_workdir'>workdir</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_workdir'>workdir</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Mail_Users:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Mail_Points:</span> <span class='id identifier rubyid_mail_points'>mail_points</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_mail_points'>mail_points</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Job_Name:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_name'>job_name</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_name'>job_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Shell_Path_List:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_shell_path'>shell_path</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_shell_path'>shell_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># ignore input_path (not defined in Torque)
</span>    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Output_Path:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_output_path'>output_path</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_output_path'>output_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Error_Path:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># If error_path is not specified we join stdout &amp; stderr (as this
</span>    <span class='comment'># mimics what the other resource managers do)
</span>    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Join_Path:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>oe</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>reservation_id:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_reservation_id'>reservation_id</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_reservation_id'>reservation_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Priority:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Execution_Time:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_localtime'>localtime</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%C%y%m%d%H%M.%S</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>Account_Name:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_accounting_id'>accounting_id</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_accounting_id'>accounting_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>depend:</span> <span class='id identifier rubyid_depend'>depend</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>       <span class='kw'>unless</span> <span class='id identifier rubyid_depend'>depend</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>job_array_request:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_array_request'>job_array_request</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_array_request'>job_array_request</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># Set resources
</span>    <span class='id identifier rubyid_resources'>resources</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='label'>walltime:</span> <span class='id identifier rubyid_seconds_to_duration'>seconds_to_duration</span><span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_wall_time'>wall_time</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_wall_time'>wall_time</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># Set environment variables
</span>    <span class='id identifier rubyid_envvars'>envvars</span> <span class='op'>=</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_environment'>job_environment</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

    <span class='comment'># Set native options
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span>
      <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span>   <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:headers</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:resources</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_envvars'>envvars</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span>   <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:envvars</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Destructively change envvars to shellescape values
</span>    <span class='id identifier rubyid_envvars'>envvars</span><span class='period'>.</span><span class='id identifier rubyid_transform_values!'>transform_values!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='const'>Shellwords</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='comment'># Submit job
</span>    <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_submit_string'>submit_string</span><span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='label'>queue:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='label'>resources:</span> <span class='id identifier rubyid_resources'>resources</span><span class='comma'>,</span> <span class='label'>envvars:</span> <span class='id identifier rubyid_envvars'>envvars</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'># Set qsub arguments
</span>    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-F</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-h</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_submit_as_hold'>submit_as_hold</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_rerunnable'>rerunnable</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_rerunnable'>rerunnable</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-M</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_mail_points'>mail_points</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_mail_points'>mail_points</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-N</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_name'>job_name</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_name'>job_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-S</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_shell_path'>shell_path</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_shell_path'>shell_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># ignore input_path (not defined in Torque)
</span>    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-o</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_output_path'>output_path</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_output_path'>output_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-W</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x=advres:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_reservation_id'>reservation_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_reservation_id'>reservation_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-q</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_queue_name'>queue_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-p</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_localtime'>localtime</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%C%y%m%d%H%M.%S</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_accounting_id'>accounting_id</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_accounting_id'>accounting_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-W</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>depend=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_depend'>depend</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_depend'>depend</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-l</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>walltime=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_seconds_to_duration'>seconds_to_duration</span><span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_wall_time'>wall_time</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_wall_time'>wall_time</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-t</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_array_request'>job_array_request</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_array_request'>job_array_request</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-l</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>qos=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_qos'>qos</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_qos'>qos</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-l</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gpus=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_gpus_per_node'>gpus_per_node</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_gpus_per_node'>gpus_per_node</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># Set environment variables
</span>    <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_job_environment'>job_environment</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-V</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_copy_environment?'>copy_environment?</span>

    <span class='comment'># If error_path is not specified we join stdout &amp; stderr (as this
</span>    <span class='comment'># mimics what the other resource managers do)
</span>    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-j</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oe</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_error_path'>error_path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># Set native options
</span>    <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span> <span class='kw'>if</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_native'>native</span>

    <span class='comment'># Submit job
</span>    <span class='ivar'>@pbs</span><span class='period'>.</span><span class='id identifier rubyid_submit'>submit</span><span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>env:</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='label'>chdir:</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_workdir'>workdir</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="" title="OodCore::Job::Adapters::Torque (class)">Torque</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch.html" title="OodCore::Job::Adapters::Torque::Batch (class)">Batch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Torque/Batch/Error.html" title="OodCore::Job::Adapters::Torque::Batch::Error (class)">Error</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../JobAdapterError.html" title="OodCore::JobAdapterError (class)">JobAdapterError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Oct 11 18:13:11 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.0.4).
</div>

    </div>
  </body>
</html>