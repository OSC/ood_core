<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OodCore::Job::Adapters::Slurm::Batch
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OodCore::Job::Adapters::Slurm::Batch";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../OodCore.html" title="OodCore (module)">OodCore</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Job.html" title="OodCore::Job (module)">Job</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Adapters.html" title="OodCore::Job::Adapters (module)">Adapters</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Slurm.html" title="OodCore::Job::Adapters::Slurm (class)">Slurm</a></span></span>
     &raquo; 
    <span class="title">Batch</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OodCore::Job::Adapters::Slurm::Batch
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OodCore::Job::Adapters::Slurm::Batch</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ood_core/job/adapters/slurm.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>

<p>Object used for simplified communication with a Slurm batch server</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="UNIT_SEPARATOR-constant" class="">UNIT_SEPARATOR =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  You should avoid using this constant if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x1F</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="RECORD_SEPARATOR-constant" class="">RECORD_SEPARATOR =
          <div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This constant is part of a private API.</strong>
  You should avoid using this constant if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x1E</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#bin-instance_method" title="#bin (instance method)">#<strong>bin</strong>  &#x21d2; Pathname </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>The path to the Slurm client installation binaries.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#bin_overrides-instance_method" title="#bin_overrides (instance method)">#<strong>bin_overrides</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Optional overrides for Slurm client executables.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cluster-instance_method" title="#cluster (instance method)">#<strong>cluster</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>The cluster of the Slurm batch server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#conf-instance_method" title="#conf (instance method)">#<strong>conf</strong>  &#x21d2; Pathname<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>The path to the Slurm configuration file.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_squeue_fields-instance_method" title="#all_squeue_fields (instance method)">#<strong>all_squeue_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Fields requested from a formatted `squeue` call Note that the order of
these fields is important.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_job-instance_method" title="#delete_job (instance method)">#<strong>delete_job</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Delete a specified job from batch server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_jobs-instance_method" title="#get_jobs (instance method)">#<strong>get_jobs</strong>(id: &quot;&quot;, owner: nil, attrs: nil)  &#x21d2; Array&lt;Hash&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get a list of hashes detailing each of the jobs on the batch server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hold_job-instance_method" title="#hold_job (instance method)">#<strong>hold_job</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Put a specified job on hold.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(cluster: nil, bin: nil, conf: nil, bin_overrides: {})  &#x21d2; Batch </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Batch.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release_job-instance_method" title="#release_job (instance method)">#<strong>release_job</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Release a specified job that is on hold.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#squeue_args-instance_method" title="#squeue_args (instance method)">#<strong>squeue_args</strong>(id: &quot;&quot;, owner: nil, options: [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>TODO: write some barebones test for this? like 2 options and id or no id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#squeue_fields-instance_method" title="#squeue_fields (instance method)">#<strong>squeue_fields</strong>(attrs)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#squeue_required_fields-instance_method" title="#squeue_required_fields (instance method)">#<strong>squeue_required_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#submit_string-instance_method" title="#submit_string (instance method)">#<strong>submit_string</strong>(str, args: [], env: {})  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Submit a script expanded as a string to the batch server.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(cluster: nil, bin: nil, conf: nil, bin_overrides: {})  &#x21d2; <tt><span class='object_link'><a href="" title="OodCore::Job::Adapters::Slurm::Batch (class)">Batch</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns a new instance of Batch.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cluster</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the cluster name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>conf</span>
      
      
        <span class='type'>(<tt>#to_s</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>path to the slurm conf</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bin</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>path to slurm installation binaries</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>cluster:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>bin:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>conf:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>bin_overrides:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@cluster</span> <span class='op'>=</span> <span class='id identifier rubyid_cluster'>cluster</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_cluster'>cluster</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='ivar'>@conf</span>    <span class='op'>=</span> <span class='id identifier rubyid_conf'>conf</span>    <span class='op'>&amp;&amp;</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_conf'>conf</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='ivar'>@bin</span>     <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_bin'>bin</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='ivar'>@bin_overrides</span> <span class='op'>=</span> <span class='id identifier rubyid_bin_overrides'>bin_overrides</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="bin-instance_method">
  
    #<strong>bin</strong>  &#x21d2; <tt>Pathname</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>The path to the Slurm client installation binaries</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>For Slurm 10.0.0</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_bin'>bin</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'>#=&gt; &quot;/usr/local/slurm/10.0.0/bin</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Pathname</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to slurm binaries</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bin'>bin</span>
  <span class='ivar'>@bin</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="bin_overrides-instance_method">
  
    #<strong>bin_overrides</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Optional overrides for Slurm client executables</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sbatch</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/usr/local/bin/sbatch</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 63</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bin_overrides'>bin_overrides</span>
  <span class='ivar'>@bin_overrides</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="cluster-instance_method">
  
    #<strong>cluster</strong>  &#x21d2; <tt>String</tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>The cluster of the Slurm batch server</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>CHPC&#39;s kingspeak cluster</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_cluster'>cluster</span> <span class='comment'>#=&gt; &quot;kingspeak&quot;</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the cluster name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cluster'>cluster</span>
  <span class='ivar'>@cluster</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="conf-instance_method">
  
    #<strong>conf</strong>  &#x21d2; <tt>Pathname</tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>The path to the Slurm configuration file</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>For Slurm 10.0.0</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_conf'>conf</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'>#=&gt; &quot;/usr/local/slurm/10.0.0/etc/slurm.conf</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Pathname</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to slurm conf</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_conf'>conf</span>
  <span class='ivar'>@conf</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all_squeue_fields-instance_method">
  
    #<strong>all_squeue_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Fields requested from a formatted `squeue` call Note that the order of
these fields is important</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_squeue_fields'>all_squeue_fields</span>
  <span class='lbrace'>{</span>
    <span class='label'>account:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>job_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>exec_host:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%B</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>min_cpus:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>cpus:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%C</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>min_tmp_disk:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>nodes:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%D</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>end_time:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%e</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>dependency:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%E</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>features:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%f</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>array_job_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%F</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>group_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%g</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>group_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%G</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>over_subscribe:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%h</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>sockets_per_node:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>array_job_task_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%i</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>cores_per_socket:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%I</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>job_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%j</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>threads_per_core:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%J</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>comment:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%k</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>array_task_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%K</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>time_limit:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%l</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>time_left:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%L</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>min_memory:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%m</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>time_used:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%M</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>req_node:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>node_list:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%N</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>command:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%o</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>contiguous:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%O</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>qos:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%q</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>partition:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%P</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Q</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>reason:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>start_time:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%S</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>state_compact:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%t</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>state:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%T</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>user:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%u</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>user_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%U</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>reservation:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%v</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>submit_time:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%V</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>wckey:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%w</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>licenses:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%W</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>excluded_nodes:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>core_specialization:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%X</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>nice:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%y</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>scheduled_nodes:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>sockets_cores_threads:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>work_dir:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='label'>gres:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='comment'># must come at the end to fix a bug with Slurm 18
</span>  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_job-instance_method">
  
    #<strong>delete_job</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p>
<p>Delete a specified job from batch server</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Delete job “1234”</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_delete_job'>delete_job</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1234</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if `scancel` command exited unsuccessfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_job'>delete_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>scancel</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_jobs-instance_method">
  
    #<strong>get_jobs</strong>(id: &quot;&quot;, owner: nil, attrs: nil)  &#x21d2; <tt>Array&lt;Hash&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get a list of hashes detailing each of the jobs on the batch server</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Status info for all jobs</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_get_jobs'>get_jobs</span>
<span class='comment'>#=&gt;
</span><span class='comment'>#[
</span><span class='comment'>#  {
</span><span class='comment'>#    :account =&gt; &quot;account&quot;,
</span><span class='comment'>#    :job_id =&gt; &quot;my_job&quot;,
</span><span class='comment'>#    ...
</span><span class='comment'>#  },
</span><span class='comment'>#  {
</span><span class='comment'>#    :account =&gt; &quot;account&quot;,
</span><span class='comment'>#    :job_id =&gt; &quot;my_other_job&quot;,
</span><span class='comment'>#    ...
</span><span class='comment'>#  },
</span><span class='comment'>#  ...
</span><span class='comment'>#]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>owner</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the owner(s) of the job</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attrs</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>list of attributes request when calling squeue</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>list of details for jobs</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if `squeue` command exited unsuccessfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_jobs'>get_jobs</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>owner:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>attrs:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fields'>fields</span> <span class='op'>=</span> <span class='id identifier rubyid_squeue_fields'>squeue_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_squeue_args'>squeue_args</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>owner:</span> <span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>

  <span class='comment'>#TODO: switch mock of Open3 to be the squeue mock script
</span>  <span class='comment'># then you can use that for performance metrics
</span>  <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>squeue</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_output'>output</span><span class='op'>|</span>
    <span class='id identifier rubyid_advance_past_squeue_header!'>advance_past_squeue_header!</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#RECORD_SEPARATOR-constant" title="OodCore::Job::Adapters::Slurm::Batch::RECORD_SEPARATOR (constant)">RECORD_SEPARATOR</a></span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='comment'># TODO: once you can do performance metrics you can test zip against some other tools
</span>      <span class='comment'># or just small optimizations
</span>      <span class='comment'># for example, fields is ALREADY A HASH and we are setting the VALUES to
</span>      <span class='comment'># &quot;line.strip.split(unit_separator)&quot; array
</span>      <span class='comment'>#
</span>      <span class='comment'># i.e. store keys in an array, do Hash[[keys, values].transpose]
</span>      <span class='comment'>#
</span>      <span class='comment'># or
</span>      <span class='comment'>#
</span>      <span class='comment'># job = {}
</span>      <span class='comment'># keys.each_with_index { |key, index| [key] = values[index] }
</span>      <span class='comment'># jobs &lt;&lt; job
</span>      <span class='comment'>#
</span>      <span class='comment'># assuming keys and values are same length! if not we have an error!
</span>      <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#RECORD_SEPARATOR-constant" title="OodCore::Job::Adapters::Slurm::Batch::RECORD_SEPARATOR (constant)">RECORD_SEPARATOR</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#UNIT_SEPARATOR-constant" title="OodCore::Job::Adapters::Slurm::Batch::UNIT_SEPARATOR (constant)">UNIT_SEPARATOR</a></span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>&lt;&lt;</span> <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_jobs'>jobs</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hold_job-instance_method">
  
    #<strong>hold_job</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p>
<p>Put a specified job on hold</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Put job “1234” on hold</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_hold_job'>hold_job</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1234</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if `scontrol` command exited unsuccessfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hold_job'>hold_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>scontrol</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hold</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release_job-instance_method">
  
    #<strong>release_job</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p>
<p>Release a specified job that is on hold</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Release job “1234” from on hold</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_my_batch'>my_batch</span><span class='period'>.</span><span class='id identifier rubyid_release_job'>release_job</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1234</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if `scontrol` command exited unsuccessfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release_job'>release_job</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>scontrol</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>release</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="squeue_args-instance_method">
  
    #<strong>squeue_args</strong>(id: &quot;&quot;, owner: nil, options: [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>TODO: write some barebones test for this? like 2 options and id or no id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_squeue_args'>squeue_args</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>owner:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>options:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span>  <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--all</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--states=all</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--noconvert</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-o</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#RECORD_SEPARATOR-constant" title="OodCore::Job::Adapters::Slurm::Batch::RECORD_SEPARATOR (constant)">RECORD_SEPARATOR</a></span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#UNIT_SEPARATOR-constant" title="OodCore::Job::Adapters::Slurm::Batch::UNIT_SEPARATOR (constant)">UNIT_SEPARATOR</a></span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-u</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-j</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_args'>args</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="squeue_fields-instance_method">
  
    #<strong>squeue_fields</strong>(attrs)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_squeue_fields'>squeue_fields</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_all_squeue_fields'>all_squeue_fields</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_all_squeue_fields'>all_squeue_fields</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_squeue_attrs_for_info_attrs'>squeue_attrs_for_info_attrs</span><span class='lparen'>(</span><span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_squeue_required_fields'>squeue_required_fields</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="squeue_required_fields-instance_method">
  
    #<strong>squeue_required_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_squeue_required_fields'>squeue_required_fields</span>
  <span class='comment'>#TODO: does this need to include ::array_job_task_id?
</span>  <span class='comment'>#TODO: does it matter that order of the output can vary depending on the arguments and if &quot;squeue_required_fields&quot; are included?
</span>  <span class='comment'># previously the order was &quot;fields.keys&quot;; i don&#39;t think it does
</span>  <span class='lbracket'>[</span><span class='symbol'>:job_id</span><span class='comma'>,</span> <span class='symbol'>:state_compact</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="submit_string-instance_method">
  
    #<strong>submit_string</strong>(str, args: [], env: {})  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Submit a script expanded as a string to the batch server</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>str</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>script as a string</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array&lt;#to_s&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>arguments passed to `sbatch` command</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>env</span>
      
      
        <span class='type'>(<tt>Hash{#to_s =&gt; #to_s}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>environment variables set</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the job that was created</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Batch/Error.html" title="OodCore::Job::Adapters::Slurm::Batch::Error (class)">Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if `sbatch` command exited unsuccessfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ood_core/job/adapters/slurm.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_submit_string'>submit_string</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='label'>args:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>env:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--parsable</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sbatch</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>env:</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='label'>stdin:</span> <span class='id identifier rubyid_str'>str</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jul 27 09:13:45 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.5.0).
</div>

    </div>
  </body>
</html>